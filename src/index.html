<!DOCTYPE html>
<html>
<head>
    <title>Capture Widget/Sketchpad</title>
    <style>
        canvas {
            border: 1px solid black;
            cursor: crosshair;
        }
        button {
            padding: 10px;
        }

        #slider{
            width:300px;
            float:left;
            margin-top:-5px;
            border-radius:0;
            height:5px;
            position:absolute;
        }

        #slider .tick {
            z-index:1;
            background: #4f3;
            border: none;
            position: absolute;
            height: 100%;
            width: 2px;
            left: 0%;
            opacity: .3;
        }

        #slider .ui-slider-handle {
            width: 0.6em;
            border: none;
            background: #999;
            height: 300%;
            margin-top:-5px;
            top: 0;
            margin-left: -0.3em;
        }

        #slider .ui-slider-range {
            background:green;
        }

        .hidden {
            display:none;
        }
    </style>
    <script src='jquery-1.10.2.min.js'></script>
    <script src='http://code.jquery.com/ui/1.10.3/jquery-ui.js'></script>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css">
    <script src='operation_manager.js'></script>
    <script src='capture-widget.js'></script>
    <script>
        var CW, lec;
        $(document).ready(function(){
            lec = new lecture({
                canvas_id: 'sketchpad'
            });

            CW = new capture_widget({
                canvas_id: 'sketchpad'
            });

            $('#slider').slider({
                disabled: true,
                step:1,
                range: 'min'
            });

            $('#slider').on('slide', function(event, ui) {
                var minute = Math.floor(ui.value/60);
                if(minute<10) {
                    minute = '0'+minute;
                }
                var second = ui.value % 60;
                if(second < 10) {
                    second = '0'+second;
                }
                $('#ticker').text(minute + ':' + second);
            });

            $('#slider').width($('canvas').width());
            $('#ticker').css('position', 'absolute'); //so many bad things.
            $('#ticker').css('left', parseInt($('#slider').width())+20 + 'px'); //holy shit.
            $('#ticker').css('top', parseInt($('#slider').position().top)-10 + 'px'); //oh god.
        })
    </script>
</head>

<body>
        <div>
            <button class="recording-options" onclick="$('.recording-options').toggleClass('hidden');lec.start_recording();">Record</button>
            <button class="recording-options hidden" onclick="$('.recording-options').toggleClass('hidden');lec.stop_recording();">Stop Record</button>

            <button id="clear" onclick="CW.clear();">Clear</button>
            <button onclick="CW.set_active_visual_type('stroke')">Strokes</button>
            <button onclick="CW.set_active_visual_type('dots')">Dots</button>
            <button onclick="CW.undo()">undo</button>
            <button onclick="CW.redo()">redo</button>

            <button onclick="CW.change_property({property: 'line_color', value: '#000'});">Black</button>
            <button onclick="CW.change_property({property: 'line_color', value: '#F00'});">Red</button>
            <button onclick="CW.change_property({property: 'line_color', value: '#0F0'});">Green</button>
            <button onclick="CW.change_property({property: 'line_color', value: '#00F'});">Blue</button>
        </div>
        <div>
            <canvas id='sketchpad'></canvas>
        </div>
        
        <br/>
        <div id="slider"></div><span id="ticker">00:00.00</span>
</body>
</html>